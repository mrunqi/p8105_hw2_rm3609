---
title: "p8105_hw2_rm3609.Rmd"
author: "Runqi Ma"
date: "2018/10/4"
output: html_document
---

#Set up
```{r}
library(tidyverse)
```

#Problem 1

###Read and clean the data; retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance. 
###Convert the entry variable from character (YES vs NO) to a logical variable .
```{r}
ny_subway = 
  read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
ny_subway
```

The dataset contains line, station name, station latitude and longitude, routes served, entry, vending, entrance type, and ADA compliance.

I have cleaned the variable names, selected the variables that I want, and changed the entry variable from character to a logical variable.

The resulting dataset is 1868 x 19.

The data is not tidy yet. Some column names contain variable.


###How many distinct stations are there? 
```{r}
dist_both = distinct(ny_subway, line, station_name, .keep_all = TRUE )
dist_both
```
There are 465 distinct stations.

###How many stations are ADA compliant?
```{r}
count(dist_both, ada)
```
84 stations

###What proportion of station entrances / exits without vending allow entrance?
```{r}
filter(ny_subway, vending == "NO" & entry == "TRUE" )
69/1868
```
3.69% of station entrances / exits without vending allow entrance

###Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?
```{r}
ref_sub = gather(ny_subway, key = route_number, value = route_name, route1:route11) %>% 
distinct(line, station_name, .keep_all = TRUE )
count(ref_sub, route_name)
filter(ref_sub, route_name == "A" & ada == TRUE)
```
60 distinct stations serve the A train.
Of the stations that serve the A train, 17 are ADA compliant.


#problem 2
###clean the Mr. Trash Wheel sheet
```{r}
library(readxl)
tra_whe = read_excel ("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
                     sheet = "Mr. Trash Wheel", range = "A2:N257" ) %>% 
  janitor::clean_names() %>% 
  rename(weight = weight_tons, volume = volume_cubic_yards) %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_balls = as.integer(sports_balls))

tra_whe
```

